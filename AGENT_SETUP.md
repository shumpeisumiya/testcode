# ElevenLabs エージェント設定ガイド

## エージェントID
`agent_8901kdnrdyhtfx7ahkhc3qy4xd1f`

## 会話フロー例

エージェントには以下のような会話フローを設定することをお勧めします：

### 1. 挨拶と目的確認
```
エージェント: 「建機レンタルサービスへようこそ。どの建機をレンタルされますか?」
```

### 2. 建機の種類を確認
```
ユーザー: 「ショベルカーをレンタルしたいです」
エージェント: 「かしこまりました。ショベルカーですね。サイズはどのようなものをお探しですか？
           - 小型（0.1m³）
           - 中型（0.25m³）
           - 大型（0.45m³以上）」
```

### 3. レンタル期間を確認
```
エージェント: 「レンタル期間はどのくらいを予定されていますか？」
ユーザー: 「2週間です」
```

### 4. 配送先を確認
```
エージェント: 「配送先の住所を教えてください」
ユーザー: 「東京都渋谷区代々木1-2-3の建設現場です」
```

### 5. オプションの確認
```
エージェント: 「オペレーターの派遣は必要ですか？」
ユーザー: 「はい、お願いします」

エージェント: 「保険オプションはいかがですか？
           - 基本プラン（無料）
           - 充実プラン（1日1,000円）」
```

### 6. 内容確認と注文確定
```
エージェント: 「ご注文内容を確認させていただきます。
           建機: ショベルカー（0.25m³）
           期間: 2週間
           配送先: 東京都渋谷区代々木1-2-3
           オペレーター: あり
           保険: 基本プラン
           
           この内容でよろしいでしょうか？」
ユーザー: 「はい、お願いします」
エージェント: 「ありがとうございます。注文を確定いたしました。注文番号はORD-XXXXXです。」
```

## メタデータ送信のタイミング

エージェントは、すべての必須情報が揃い、ユーザーが確認した後に以下の形式でメタデータを送信してください：

```json
{
  "type": "order_confirmed",
  "order": {
    "equipment": "ショベルカー（0.25m³）",
    "duration": "2週間",
    "location": "東京都渋谷区代々木1-2-3 建設現場",
    "operator": "必要",
    "insurance": "基本プラン",
    "notes": "その他の要望やメモ"
  }
}
```

## システムプロンプト例

ElevenLabsのエージェント設定画面で、以下のようなシステムプロンプトを設定してください：

```
あなたは建設業向けの建機レンタルサービスのAIアシスタントです。
丁寧で親切な対応を心がけ、以下の情報を順番に聞き取ってください：

1. 建機の種類（ショベルカー、クレーン、ブルドーザー等）
2. 建機のサイズ/スペック
3. レンタル期間
4. 配送先住所
5. オプション（オペレーター派遣、保険）

すべての情報が揃ったら、内容を確認し、ユーザーが承認したらメタデータとして送信してください。

専門用語は分かりやすく説明し、不明点があれば質問してください。
建設現場での安全性や効率性を考慮したアドバイスも適宜提供してください。
```

## カスタム関数の設定

ElevenLabsのエージェント設定で、以下のようなカスタム関数を定義できます：

### 関数: send_order_data

**説明:** 注文情報をシステムに送信する

**パラメータ:**
```json
{
  "equipment": {
    "type": "string",
    "description": "建機の種類とサイズ（例: ショベルカー 0.25m³）"
  },
  "duration": {
    "type": "string",
    "description": "レンタル期間（例: 2週間、1ヶ月）"
  },
  "location": {
    "type": "string",
    "description": "配送先住所"
  },
  "operator": {
    "type": "string",
    "description": "オペレーター派遣の有無（必要/不要）"
  },
  "insurance": {
    "type": "string",
    "description": "保険プラン（基本プラン/充実プラン）"
  }
}
```

## 建機カタログ（参考情報）

エージェントが建機について説明できるように、以下の情報を知識ベースに追加してください：

### ショベルカー（油圧ショベル）
- **小型（0.1m³）**: 住宅地の工事、狭い現場に最適
  - レンタル料: 1日 15,000円〜
- **中型（0.25m³）**: 一般的な建設現場で最も使われるサイズ
  - レンタル料: 1日 25,000円〜
- **大型（0.45m³以上）**: 大規模工事、掘削深度が深い作業
  - レンタル料: 1日 40,000円〜

### クレーン
- **ラフタークレーン**: 不整地でも作業可能
  - レンタル料: 1日 50,000円〜
- **オールテレーンクレーン**: 高所作業、重量物の吊り上げ
  - レンタル料: 1日 80,000円〜

### ブルドーザー
- **小型（3t級）**: 整地、小規模な土木工事
  - レンタル料: 1日 30,000円〜
- **大型（15t級以上）**: 大規模な造成工事
  - レンタル料: 1日 60,000円〜

### その他
- **ダンプトラック**: 土砂運搬
- **フォークリフト**: 資材運搬
- **高所作業車**: 高所での作業

## エージェントのテスト方法

1. ElevenLabsダッシュボードでエージェントをテスト
2. 各シナリオで正しく情報を収集できるか確認
3. メタデータが正しく送信されるか確認
4. 実際のアプリケーションで動作確認

## トラブルシューティング

### メタデータが送信されない
- エージェントの関数呼び出し設定を確認
- コンソールログでエラーを確認
- メタデータの形式が正しいか確認

### エージェントが情報を忘れる
- システムプロンプトで会話の記憶を維持するよう指示
- 重要な情報は確認のために繰り返す

### ユーザーの質問に答えられない
- 知識ベースを充実させる
- よくある質問のパターンを追加
- 不明な場合は人間のオペレーターに転送する仕組みを追加
